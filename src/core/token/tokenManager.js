function a9_0x11f8(_0x48f427,_0x1dd617){const _0x244610=a9_0x2446();return a9_0x11f8=function(_0x11f80c,_0x59b7ee){_0x11f80c=_0x11f80c-0x135;let _0x48baf4=_0x244610[_0x11f80c];return _0x48baf4;},a9_0x11f8(_0x48f427,_0x1dd617);}const a9_0x2875d2=a9_0x11f8;(function(_0x5961ad,_0x49a1f7){const _0x5ebff7=a9_0x11f8,_0x47998c=_0x5961ad();while(!![]){try{const _0x2b6685=-parseInt(_0x5ebff7(0x15e))/0x1+parseInt(_0x5ebff7(0x150))/0x2+-parseInt(_0x5ebff7(0x14a))/0x3+parseInt(_0x5ebff7(0x154))/0x4+-parseInt(_0x5ebff7(0x15c))/0x5*(-parseInt(_0x5ebff7(0x14b))/0x6)+-parseInt(_0x5ebff7(0x17a))/0x7*(-parseInt(_0x5ebff7(0x158))/0x8)+parseInt(_0x5ebff7(0x179))/0x9*(-parseInt(_0x5ebff7(0x138))/0xa);if(_0x2b6685===_0x49a1f7)break;else _0x47998c['push'](_0x47998c['shift']());}catch(_0x38e286){_0x47998c['push'](_0x47998c['shift']());}}}(a9_0x2446,0x25d17));import{ethers}from'ethers';import{validateAddress,getContract}from'../constant/constant.js';import{ERC20_ABI}from'../abi/abi.js';import{Setup}from'../../../setup.js';function a9_0x2446(){const _0x57291f=['12DfJIAK','Failed\x20to\x20check\x20Allowance','\x20success','Invalid\x20token\x20address\x20for\x20','retryTransaction','368582rgperd','error','message','symbol','821516APCQQD','Approving','formatAllowance','FIXED_GAS_PRICE','4152BujkGJ','KODO-SWAP','hash','acc','135845FFzzXE','handleTransaction','96037jRpdjp','\x20on\x20','approve','Checking\x20allowance','checkAndApprove','checkAllowance','toUpperCase','serviceManager','walletInstance','formatTxHash','Unapproving','approveToken','swapCount','UINT256MAX','allowance','IZUMI_SWAP','N/A','address','IZUMI','interface','weth','Allowance\x20for\x20','has','toString','handleError','log','taiko','1124577DiFeeQ','2779bKIgiG','waitForTransactionConfirmation','contracts','Contract','coreInstance','toLowerCase','GASLIMIT','10BXbUbk','Transaction\x20failed\x20to\x20send.','\x22\x20is\x20not\x20recognized','getTransactionCount','usdt','checkAndUnapprove','Token\x20name\x20\x22','userManager','usdc','IZUMI-SWAP','Starting\x20approval...','Spending\x20Token\x20','Executing:\x20','ðŸ“‹\x20Transaction\x20executed\x20at\x20tx:\x20','\x20into\x20','step','MAX','\x20Into\x20','822474neKMac'];a9_0x2446=function(){return _0x57291f;};return a9_0x2446();}import a9_0x48ba65 from'../transaction/transactionManager.js';import a9_0x42aa9b from'../service/serviceManager.js';import a9_0x1092c9 from'../user/balaceManager.js';import a9_0x46fa04 from'../../utils/twister.js';export default class TokenManager{constructor(_0x5ea465){const _0x118079=a9_0x11f8;this['coreInstance']=_0x5ea465,this['transactionManager']=new a9_0x48ba65(this['coreInstance']),this[_0x118079(0x165)]=new a9_0x42aa9b(this[_0x118079(0x135)]),this[_0x118079(0x13f)]=new a9_0x1092c9(this['coreInstance']);}async[a9_0x2875d2(0x162)](_0x21d8dc,_0x58d8e1){const _0x7feb50=a9_0x2875d2,_0x1bde98=new Set([_0x7feb50(0x140),_0x7feb50(0x13c),'taiko',_0x7feb50(0x172)]);_0x21d8dc=_0x21d8dc[_0x7feb50(0x136)]();if(!_0x1bde98[_0x7feb50(0x174)](_0x21d8dc))return this['coreInstance'][_0x7feb50(0x176)]('Failed\x20to\x20check\x20Allowance',_0x7feb50(0x13e)+_0x21d8dc+'\x22\x20is\x20not\x20recognized');const _0xa1b957=validateAddress(getContract(_0x21d8dc));if(!_0xa1b957)return this[_0x7feb50(0x135)][_0x7feb50(0x176)](_0x7feb50(0x14c),_0x7feb50(0x14e)+_0x21d8dc);const _0x498936=await this['checkAllowance'](_0xa1b957,_0x58d8e1,this[_0x7feb50(0x135)][_0x7feb50(0x16f)]),_0x3561ce=this[_0x7feb50(0x156)](_0x498936);a9_0x46fa04[_0x7feb50(0x177)](_0x7feb50(0x161),this[_0x7feb50(0x135)]['acc'],this[_0x7feb50(0x135)],'Allowance\x20for\x20'+_0x21d8dc[_0x7feb50(0x164)]()+':\x20'+_0x3561ce+_0x7feb50(0x15f)+(_0x58d8e1===this[_0x7feb50(0x135)][_0x7feb50(0x17c)][_0x7feb50(0x16d)]?_0x7feb50(0x170):'KODO')),_0x498936!=this['coreInstance'][_0x7feb50(0x16b)]&&await this[_0x7feb50(0x169)](_0xa1b957,this[_0x7feb50(0x135)][_0x7feb50(0x16b)],_0x58d8e1);}async[a9_0x2875d2(0x13d)](_0x10730e,_0x4c8a8c){const _0x2d4abf=a9_0x2875d2,_0x56476a=new Set([_0x2d4abf(0x140),'usdt',_0x2d4abf(0x178),_0x2d4abf(0x172)]);_0x10730e=_0x10730e[_0x2d4abf(0x136)]();if(!_0x56476a[_0x2d4abf(0x174)](_0x10730e))return this[_0x2d4abf(0x135)][_0x2d4abf(0x176)](_0x2d4abf(0x14c),_0x2d4abf(0x13e)+_0x10730e+_0x2d4abf(0x13a));const _0x597b9d=validateAddress(getContract(_0x10730e));if(!_0x597b9d)return this[_0x2d4abf(0x135)]['handleError'](_0x2d4abf(0x14c),_0x2d4abf(0x14e)+_0x10730e);const _0x531be9=await this[_0x2d4abf(0x163)](_0x597b9d,_0x4c8a8c,this['coreInstance'][_0x2d4abf(0x16f)]),_0x3e0e3d=this[_0x2d4abf(0x156)](_0x531be9);a9_0x46fa04[_0x2d4abf(0x177)](_0x2d4abf(0x161),this[_0x2d4abf(0x135)][_0x2d4abf(0x15b)],this[_0x2d4abf(0x135)],_0x2d4abf(0x173)+_0x10730e[_0x2d4abf(0x164)]()+':\x20'+_0x3e0e3d+_0x2d4abf(0x15f)+(_0x4c8a8c===this[_0x2d4abf(0x135)][_0x2d4abf(0x17c)][_0x2d4abf(0x16d)]?_0x2d4abf(0x141):_0x2d4abf(0x159))),_0x531be9>0x0&&await this[_0x2d4abf(0x169)](_0x597b9d,0x0,_0x4c8a8c);}async[a9_0x2875d2(0x163)](_0x255022,_0x6b2ca2,_0x33c7c7){const _0x34a28f=a9_0x2875d2,_0x49f7b7=new ethers['Contract'](_0x255022,ERC20_ABI,this[_0x34a28f(0x135)][_0x34a28f(0x166)]);return await _0x49f7b7[_0x34a28f(0x16c)](_0x33c7c7,_0x6b2ca2);}[a9_0x2875d2(0x156)](_0x47d5d0){const _0x259436=a9_0x2875d2,_0x4c860b=Number(_0x47d5d0);if(_0x4c860b===0x0)return'0';if(_0x4c860b===Number(this[_0x259436(0x135)]['UINT256MAX']))return _0x259436(0x148);return _0x4c860b[_0x259436(0x175)]();}async['approveToken'](_0x350178,_0x21b831,_0x2bd289){const _0x21f29d=a9_0x2875d2;try{const _0x2407fb=new ethers[(_0x21f29d(0x17d))](ethers['getAddress'](_0x350178),ERC20_ABI,this[_0x21f29d(0x135)][_0x21f29d(0x166)]),_0x5e2cc8=await _0x2407fb[_0x21f29d(0x153)](),_0x5c8d7a=_0x21b831===0x0?'0':_0x21b831===this['coreInstance']['UINT256MAX']?_0x21f29d(0x148):_0x21b831[_0x21f29d(0x175)](),_0x16cb11=_0x21b831===0x0?_0x21f29d(0x168):_0x21f29d(0x155);a9_0x46fa04[_0x21f29d(0x177)](_0x21f29d(0x144)+_0x16cb11+'\x20'+_0x5c8d7a+'\x20'+_0x5e2cc8+'\x20to\x20'+(_0x2bd289===this[_0x21f29d(0x135)][_0x21f29d(0x17c)][_0x21f29d(0x16d)]?'IZUMI-SWAP':_0x21f29d(0x159)),this[_0x21f29d(0x135)]['acc'],this[_0x21f29d(0x135)],_0x21f29d(0x142));const _0x48a4f9=_0x2407fb[_0x21f29d(0x171)]['encodeFunctionData'](_0x21f29d(0x160),[_0x2bd289,_0x21b831]);let _0x20d855=Setup[_0x21f29d(0x137)];const _0x1119ae={'to':_0x350178,'from':this[_0x21f29d(0x135)][_0x21f29d(0x16f)],'value':0x0,'data':_0x48a4f9,'gasLimit':_0x20d855[_0x21f29d(0x175)](),'gasPrice':this[_0x21f29d(0x135)][_0x21f29d(0x157)],'nonce':await this[_0x21f29d(0x135)]['provider'][_0x21f29d(0x13b)](this[_0x21f29d(0x135)][_0x21f29d(0x16f)])},_0xf2b153=_0x16cb11+'\x20'+_0x5c8d7a+'\x20'+_0x5e2cc8+'\x20Into\x20'+(_0x2bd289===this[_0x21f29d(0x135)][_0x21f29d(0x17c)][_0x21f29d(0x16d)]?_0x21f29d(0x141):'KODO-SWAP');this['coreInstance'][_0x21f29d(0x147)]=''+_0xf2b153;try{const _0x38bdbc=await this[_0x21f29d(0x165)][_0x21f29d(0x14f)](async()=>{const _0x15921c=_0x21f29d;return await this[_0x15921c(0x165)][_0x15921c(0x15d)](async()=>await this['coreInstance'][_0x15921c(0x166)]['sendTransaction'](_0x1119ae),_0xf2b153);});if(!_0x38bdbc){this['coreInstance']['handleError'](_0x16cb11,_0x21f29d(0x139)),this[_0x21f29d(0x135)][_0x21f29d(0x16a)]++;return;}const _0x38d2df=_0x38bdbc[_0x21f29d(0x15a)]||_0x21f29d(0x16e);await this[_0x21f29d(0x165)][_0x21f29d(0x17b)](_0x38d2df,_0xf2b153),a9_0x46fa04[_0x21f29d(0x177)](_0x21f29d(0x145)+this[_0x21f29d(0x165)][_0x21f29d(0x167)](_0x38d2df),this['coreInstance'][_0x21f29d(0x15b)],this[_0x21f29d(0x135)],'âœ…\x20'+_0x16cb11+'\x20'+_0x5c8d7a+'\x20'+_0x5e2cc8+_0x21f29d(0x149)+(_0x2bd289===this[_0x21f29d(0x135)][_0x21f29d(0x17c)][_0x21f29d(0x16d)]?_0x21f29d(0x141):'KODO-SWAP')+_0x21f29d(0x14d)),this[_0x21f29d(0x135)][_0x21f29d(0x16a)]++;}catch(_0x2c9d85){console['error'](_0x2c9d85);}}catch(_0x524af7){return console[_0x21f29d(0x151)](_0x524af7),this[_0x21f29d(0x135)]['handleError'](_0x21f29d(0x143)+_0x350178+_0x21f29d(0x146)+(_0x2bd289===this['coreInstance'][_0x21f29d(0x17c)][_0x21f29d(0x16d)]?_0x21f29d(0x141):_0x21f29d(0x159)),''+_0x524af7[_0x21f29d(0x152)]),null;}}}
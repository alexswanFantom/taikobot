const a4_0x1d0d42=a4_0x45c5;function a4_0x45c5(_0x259f31,_0x399887){const _0x4cc8f2=a4_0x4cc8();return a4_0x45c5=function(_0x45c5d0,_0x319708){_0x45c5d0=_0x45c5d0-0x131;let _0x421584=_0x4cc8f2[_0x45c5d0];return _0x421584;},a4_0x45c5(_0x259f31,_0x399887);}(function(_0x570ed4,_0x39a16d){const _0x3a0959=a4_0x45c5,_0x3d5b09=_0x570ed4();while(!![]){try{const _0x2dbf3c=parseInt(_0x3a0959(0x166))/0x1*(parseInt(_0x3a0959(0x13a))/0x2)+-parseInt(_0x3a0959(0x170))/0x3+parseInt(_0x3a0959(0x169))/0x4*(-parseInt(_0x3a0959(0x132))/0x5)+parseInt(_0x3a0959(0x140))/0x6+parseInt(_0x3a0959(0x155))/0x7*(parseInt(_0x3a0959(0x162))/0x8)+-parseInt(_0x3a0959(0x185))/0x9+-parseInt(_0x3a0959(0x188))/0xa*(parseInt(_0x3a0959(0x173))/0xb);if(_0x2dbf3c===_0x39a16d)break;else _0x3d5b09['push'](_0x3d5b09['shift']());}catch(_0x37601b){_0x3d5b09['push'](_0x3d5b09['shift']());}}}(a4_0x4cc8,0x2a8ea));import{ethers}from'ethers';import a4_0x549c36 from'axios';import{Helper}from'../utils/helper.js';function a4_0x4cc8(){const _0x5e29ff=['balanceManager','766NVMJfK','KODO_SWAP','getTransactionCount','GASPRICE','formatEther','balance','1845168cniDdt','initializeConstants','handleError','initializeWallet','IZUMI_SWAP','swapOnHenjin','usdt','contracts','ABIs','swapOnIzumi','UINT256MAX','unknown\x20URL','lastNonce','pendingTransactions','fromPhrase','initializeContracts','WebSocketProvider','MAXBUY','performTransaction\x20failed','kodo','contractInstances','89691xAojIU','url','taiko','address','swapManager','WETH','henjin-swap','dex','ERC20','checkAndUnapprove','SYMETRIC_SWAP','randomFloat','txCount','184QrrHRH','henjin','Failed\x20to\x20initialize','validateInput','721lmckCk','rank','setupProvider','12kvnRde','eth','symetric-swap','connect','error','swapAllTokensToWeth','provider','772086Iuaukq','acc','map','199617SoodhK','sellOnKodo','client','init','USDT','weth','Private\x20Key','tokenManager','âŒ\x20Error:\x20','Wallet','walletInstance','swapCount','izumi','toString','TAIKO','HENJIN_SWAP','HENJIN','MINIMUMBUY','114750NDeVoR','approval','delay','50sHwFEG','wss','sleep','usdc','connection','Failed\x20connecting\x20to\x20provider:\x20','parseUnits','Contract','Accounts\x20are\x20required','kodo-swap','getNetwork','weth-','572015nlAtbY','getBalances','ROUTER','JsonRpcProvider','message','MaxUint256','swapOnKodo'];a4_0x4cc8=function(){return _0x5e29ff;};return a4_0x4cc8();}import{rpc}from'./network/rpc.js';import{IZUMIABI,WETHABI,ERC20_ABI,HENJIN_ABI,KODO_ABI,SYMETRIC_ABI}from'./abi/abi.js';import a4_0x28b122 from'../utils/twister.js';import{validateAddress,getContract}from'./constant/constant.js';import{Setup}from'../../setup.js';import{tokenPath,encodedPath}from'./path/path.js';import a4_0x35d732 from'./user/balaceManager.js';import a4_0x541887 from'./token/tokenManager.js';import a4_0x135400 from'./transaction/transactionManager.js';import a4_0x4d2518 from'./swap/swapManager.js';export default class Core{constructor(_0x3df176){const _0x22fac5=a4_0x45c5;if(!_0x3df176)throw new Error(_0x22fac5(0x190));this['acc']=_0x3df176,this[_0x22fac5(0x14a)]=ethers[_0x22fac5(0x137)],this[_0x22fac5(0x176)]();}async[a4_0x1d0d42(0x176)](){const _0x645a8e=a4_0x1d0d42;try{await this[_0x645a8e(0x168)](),await this[_0x645a8e(0x141)](),await this[_0x645a8e(0x143)]();}catch(_0x3361ec){this[_0x645a8e(0x142)](_0x645a8e(0x164),_0x3361ec['message']);}}async[a4_0x1d0d42(0x168)](){const _0x35fbd1=a4_0x1d0d42,_0x2098dd=rpc[_0x35fbd1(0x172)](_0x5e43b9=>_0x5e43b9['startsWith'](_0x35fbd1(0x189))?new ethers[(_0x35fbd1(0x150))](_0x5e43b9):new ethers[(_0x35fbd1(0x135))](_0x5e43b9));for(const _0x53a532 of _0x2098dd){try{this[_0x35fbd1(0x16f)]=_0x53a532,await this[_0x35fbd1(0x16f)][_0x35fbd1(0x192)](),this[_0x35fbd1(0x175)]=this[_0x35fbd1(0x16f)];return;}catch(_0x23eba8){this['handleError'](_0x35fbd1(0x18d)+(_0x53a532[_0x35fbd1(0x18c)]?.[_0x35fbd1(0x156)]||_0x35fbd1(0x14b)),_0x23eba8[_0x35fbd1(0x136)]);}}}async[a4_0x1d0d42(0x141)](){const _0x158459=a4_0x1d0d42;this['FIXED_GAS_PRICE']=ethers[_0x158459(0x18e)](Setup[_0x158459(0x13d)],'gwei'),this[_0x158459(0x147)]={'WETH':validateAddress(getContract('weth')),'ETH':validateAddress(getContract(_0x158459(0x178))),'TAIKO':validateAddress(getContract('taiko')),'USDC':validateAddress(getContract(_0x158459(0x18b))),'USDT':validateAddress(getContract(_0x158459(0x146))),'IZUMI_SWAP':validateAddress(getContract('izumi-swap')),'HENJIN_SWAP':validateAddress(getContract(_0x158459(0x15b))),'KODO_SWAP':validateAddress(getContract(_0x158459(0x191))),'SYMETRIC_SWAP':validateAddress(getContract(_0x158459(0x16b)))},this['ABIs']={'WETH':WETHABI,'ERC20':ERC20_ABI,'ROUTER':IZUMIABI,'HENJIN':HENJIN_ABI,'KODO':KODO_ABI,'SYMETRIC':SYMETRIC_ABI},this[_0x158459(0x161)]=this[_0x158459(0x17e)]=this['runCount']=0x0,this[_0x158459(0x17d)]=null,this[_0x158459(0x13f)]=[],this[_0x158459(0x15c)]=this['step']=null,this[_0x158459(0x158)]=null,this['lastNonce']=-0x1,this[_0x158459(0x167)]=this['score']=0x0,this[_0x158459(0x14d)]=new Map();}async[a4_0x1d0d42(0x143)](){const _0x5a0f26=a4_0x1d0d42;try{const _0x5afbdb=Helper[_0x5a0f26(0x165)](this[_0x5a0f26(0x171)]);this[_0x5a0f26(0x17d)]=_0x5afbdb===_0x5a0f26(0x179)?new ethers[(_0x5a0f26(0x17c))](this[_0x5a0f26(0x171)],this[_0x5a0f26(0x16f)]):ethers['Wallet'][_0x5a0f26(0x14e)](this[_0x5a0f26(0x171)])[_0x5a0f26(0x16c)](this['provider']),this['address']=validateAddress(this['walletInstance'][_0x5a0f26(0x158)]),this[_0x5a0f26(0x14c)]=await this[_0x5a0f26(0x16f)][_0x5a0f26(0x13c)](this[_0x5a0f26(0x158)]),this[_0x5a0f26(0x14f)](),await Helper[_0x5a0f26(0x187)](0x7d0,this[_0x5a0f26(0x171)],this,'','Please\x20wait\x20while\x20we\x20set\x20up\x20your\x20wallet.'),this[_0x5a0f26(0x139)]=new a4_0x35d732(this),this[_0x5a0f26(0x159)]=new a4_0x4d2518(this),this[_0x5a0f26(0x17a)]=new a4_0x541887(this),await this['getBalances'](!![]);}catch(_0x35b502){this[_0x5a0f26(0x142)]('Failed\x20initializing\x20wallet:\x20',''+_0x35b502[_0x5a0f26(0x136)]);}}[a4_0x1d0d42(0x14f)](){const _0x521b96=a4_0x1d0d42;this[_0x521b96(0x154)]={'weth':new ethers['Contract'](this['contracts'][_0x521b96(0x15a)],this[_0x521b96(0x148)][_0x521b96(0x15a)],this['walletInstance']),'taiko':new ethers[(_0x521b96(0x18f))](this[_0x521b96(0x147)][_0x521b96(0x181)],this[_0x521b96(0x148)][_0x521b96(0x15d)],this[_0x521b96(0x17d)]),'usdc':new ethers[(_0x521b96(0x18f))](this[_0x521b96(0x147)]['USDC'],this['ABIs'][_0x521b96(0x15d)],this['walletInstance']),'usdt':new ethers[(_0x521b96(0x18f))](this['contracts'][_0x521b96(0x177)],this['ABIs'][_0x521b96(0x15d)],this[_0x521b96(0x17d)]),'swapRouter':new ethers[(_0x521b96(0x18f))](this[_0x521b96(0x147)][_0x521b96(0x144)],this['ABIs'][_0x521b96(0x134)],this[_0x521b96(0x17d)]),'henjinRouter':new ethers['Contract'](this[_0x521b96(0x147)][_0x521b96(0x182)],this['ABIs'][_0x521b96(0x183)],this[_0x521b96(0x17d)]),'kodoRouter':new ethers['Contract'](this[_0x521b96(0x147)][_0x521b96(0x13b)],this['ABIs']['KODO'],this[_0x521b96(0x17d)]),'symetricRouter':new ethers[(_0x521b96(0x18f))](this['contracts'][_0x521b96(0x15f)],this[_0x521b96(0x148)]['SYMETRIC'],this[_0x521b96(0x17d)])};}async[a4_0x1d0d42(0x133)](_0x2d12b1=![]){const _0x883323=a4_0x1d0d42;return await this[_0x883323(0x139)][_0x883323(0x133)](_0x2d12b1);}async['performSwap'](){const _0x58b6f7=a4_0x1d0d42;try{const _0x5a7ea2=Number(ethers[_0x58b6f7(0x13e)](await this[_0x58b6f7(0x16f)]['getBalance'](this['address'])));if(_0x5a7ea2<Number(Setup[_0x58b6f7(0x184)]))return this[_0x58b6f7(0x142)](_0x58b6f7(0x152),'Insufficient\x20balance\x20ETH\x20for\x20swap');const _0x4946b2={'henjin':[_0x58b6f7(0x18b),'taiko'],'kodo':['taiko',_0x58b6f7(0x146),_0x58b6f7(0x18b)],'izumi':['usdc',_0x58b6f7(0x146),_0x58b6f7(0x157)],'symetric':[_0x58b6f7(0x18b),_0x58b6f7(0x157)],'approval':['weth','usdc',_0x58b6f7(0x146),_0x58b6f7(0x157)]},_0x47cb88=async _0x5e52a2=>{const _0x543963=_0x58b6f7;for(const _0x1014bd of _0x5e52a2){const _0x4745d9=await Helper[_0x543963(0x160)](Setup['MINIMUMBUY'],Setup[_0x543963(0x151)],0x8)[_0x543963(0x180)]();await this['swapManager'][_0x543963(0x145)](_0x4745d9,_0x543963(0x16a),_0x1014bd);}},_0x529dec=async _0x4e26be=>{const _0x1bc1a7=_0x58b6f7;for(const _0x35092f of _0x4e26be){const _0x2fee6f=await Helper[_0x1bc1a7(0x160)](Setup[_0x1bc1a7(0x184)],Setup['MAXBUY'],0x8)[_0x1bc1a7(0x180)]();await this[_0x1bc1a7(0x159)]['swapOnSymetric'](_0x2fee6f,_0x1bc1a7(0x16a),_0x35092f);}},_0x3aca28=async(_0x3bd2c5,_0x24927c=![])=>{const _0x4e68c8=_0x58b6f7;for(const _0x52ddf4 of _0x3bd2c5){const _0x5df0c2=await Helper['randomFloat'](Setup['MINIMUMBUY'],Setup[_0x4e68c8(0x151)],0x8)[_0x4e68c8(0x180)]();_0x24927c?await this[_0x4e68c8(0x159)][_0x4e68c8(0x174)](_0x52ddf4):(await this[_0x4e68c8(0x159)]['swapOnKodo'](_0x5df0c2,_0x52ddf4,![]),await this[_0x4e68c8(0x159)][_0x4e68c8(0x138)](_0x5df0c2,_0x52ddf4,!![]));}},_0x140553=async _0x2d6e1f=>{const _0x49498c=_0x58b6f7;for(const _0x4cd886 of _0x2d6e1f){const _0x210e9b=await Helper[_0x49498c(0x160)](Setup[_0x49498c(0x184)],Setup[_0x49498c(0x151)],0x8)[_0x49498c(0x180)](),_0xe94e8d=await encodedPath(tokenPath['weth-'+_0x4cd886][0x0],tokenPath[_0x49498c(0x131)+_0x4cd886][0x1]);await this[_0x49498c(0x159)][_0x49498c(0x149)](_0xe94e8d,_0x210e9b,_0x4cd886,!![]),await this[_0x49498c(0x159)]['swapOnIzumi'](_0xe94e8d,_0x210e9b,_0x4cd886,![]);}};await _0x47cb88(_0x4946b2[_0x58b6f7(0x163)]),await _0x529dec(_0x4946b2['symetric']),await _0x3aca28(_0x4946b2[_0x58b6f7(0x153)]),await _0x3aca28(_0x4946b2[_0x58b6f7(0x153)],!![]),await _0x140553(_0x4946b2[_0x58b6f7(0x17f)]),await this[_0x58b6f7(0x159)][_0x58b6f7(0x16e)]();for(const _0x5e9375 of _0x4946b2[_0x58b6f7(0x186)]){await this[_0x58b6f7(0x17a)][_0x58b6f7(0x15e)](_0x5e9375,this[_0x58b6f7(0x147)]['KODO_SWAP']),await this[_0x58b6f7(0x17a)][_0x58b6f7(0x15e)](_0x5e9375,this[_0x58b6f7(0x147)][_0x58b6f7(0x144)]);}this['runCount']++;}catch(_0x578f77){console[_0x58b6f7(0x16d)](_0x578f77),await this[_0x58b6f7(0x142)]('Failed\x20performSwap',_0x578f77[_0x58b6f7(0x136)]);}}async[a4_0x1d0d42(0x142)](_0x39bb28,_0xdcf8b4){const _0x345b1d=a4_0x1d0d42;a4_0x28b122['log'](_0x39bb28,this[_0x345b1d(0x171)],this,_0x345b1d(0x17b)+_0xdcf8b4),await this[_0x345b1d(0x18a)](0xdac);}async[a4_0x1d0d42(0x18a)](_0x6ac7e8){return new Promise(_0x62a3ab=>setTimeout(_0x62a3ab,_0x6ac7e8));}}
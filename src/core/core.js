const a4_0x3eae61=a4_0x4210;(function(_0x4a7e17,_0x358091){const _0x459d8c=a4_0x4210,_0x386b6a=_0x4a7e17();while(!![]){try{const _0x93c53c=parseInt(_0x459d8c(0x91))/0x1*(parseInt(_0x459d8c(0xab))/0x2)+-parseInt(_0x459d8c(0x8d))/0x3*(parseInt(_0x459d8c(0xc9))/0x4)+-parseInt(_0x459d8c(0x9e))/0x5*(parseInt(_0x459d8c(0xb5))/0x6)+parseInt(_0x459d8c(0xbe))/0x7+-parseInt(_0x459d8c(0xd4))/0x8+-parseInt(_0x459d8c(0xb7))/0x9+-parseInt(_0x459d8c(0xda))/0xa*(-parseInt(_0x459d8c(0xa8))/0xb);if(_0x93c53c===_0x358091)break;else _0x386b6a['push'](_0x386b6a['shift']());}catch(_0x50e465){_0x386b6a['push'](_0x386b6a['shift']());}}}(a4_0x3dec,0x4df27));import{ethers}from'ethers';function a4_0x3dec(){const _0x30fa5c=['3990PdzkOh','getBalances','usdt','FIXED_GAS_PRICE','address','UINT256MAX','HENJIN_SWAP','step','contractInstances','client','ERC20','initializeContracts','runCount','contracts','HENJIN','txCount','Failed\x20connecting\x20to\x20provider:\x20','walletInstance','randomFloat','log','Failed\x20initializing\x20wallet:\x20','eth','11901dBPjQe','lastNonce','Wallet','performSwap','3mbRZYW','USDT','connection','initializeWallet','Contract','swapOnSymetric','balance','SYMETRIC','pendingTransactions','henjin','ABIs','toString','sellOnKodo','75MSksAk','KODO_SWAP','connect','symetric-swap','GASPRICE','setupProvider','izumi','approval','error','performTransaction\x20failed','46178HuRMaC','message','parseUnits','6094HIdXER','weth-','getBalance','WebSocketProvider','init','startsWith','handleError','taiko','validateInput','MAXBUY','223374pVnUmA','initializeConstants','4259412XsNqFq','gwei','USDC','JsonRpcProvider','getTransactionCount','âŒ\x20Error:\x20','tokenManager','2247175NncGVg','Private\x20Key','provider','weth','KODO','swapManager','usdc','map','kodo','url','acc','628YhVWml','score','MINIMUMBUY','WETH','MaxUint256','rank','IZUMI_SWAP','kodo-swap','getNetwork','sleep','swapOnIzumi','251000RRDMRA','unknown\x20URL','Accounts\x20are\x20required','ROUTER','dex','checkAndUnapprove'];a4_0x3dec=function(){return _0x30fa5c;};return a4_0x3dec();}import a4_0x211156 from'axios';import{Helper}from'../utils/helper.js';import{rpc}from'./network/rpc.js';import{IZUMIABI,WETHABI,ERC20_ABI,HENJIN_ABI,KODO_ABI,SYMETRIC_ABI}from'./abi/abi.js';import a4_0x504001 from'../utils/twister.js';import{validateAddress,getContract}from'./constant/constant.js';import{Setup}from'../../setup.js';import{tokenPath,encodedPath}from'./path/path.js';import a4_0x5f2835 from'./user/balaceManager.js';import a4_0x229d8b from'./token/tokenManager.js';import a4_0x4a729e from'./transaction/transactionManager.js';import a4_0x357a93 from'./swap/swapManager.js';function a4_0x4210(_0x11e983,_0x256ec4){const _0x3decdc=a4_0x3dec();return a4_0x4210=function(_0x4210c4,_0x37798a){_0x4210c4=_0x4210c4-0x7a;let _0x52e951=_0x3decdc[_0x4210c4];return _0x52e951;},a4_0x4210(_0x11e983,_0x256ec4);}export default class Core{constructor(_0x35eb31){const _0x4aa4fb=a4_0x4210;if(!_0x35eb31)throw new Error(_0x4aa4fb(0xd6));this[_0x4aa4fb(0xc8)]=_0x35eb31,this[_0x4aa4fb(0x7c)]=ethers[_0x4aa4fb(0xcd)],this[_0x4aa4fb(0xaf)]();}async['init'](){const _0x4c00ac=a4_0x4210;try{await this[_0x4c00ac(0xa3)](),await this[_0x4c00ac(0xb6)](),await this[_0x4c00ac(0x94)]();}catch(_0x13da63){this['handleError']('Failed\x20to\x20initialize',_0x13da63[_0x4c00ac(0xa9)]);}}async[a4_0x3eae61(0xa3)](){const _0x44d633=a4_0x3eae61,_0x3d1924=rpc[_0x44d633(0xc5)](_0x487425=>_0x487425[_0x44d633(0xb0)]('wss')?new ethers[(_0x44d633(0xae))](_0x487425):new ethers[(_0x44d633(0xba))](_0x487425));for(const _0x23b594 of _0x3d1924){try{this[_0x44d633(0xc0)]=_0x23b594,await this[_0x44d633(0xc0)][_0x44d633(0xd1)](),this[_0x44d633(0x80)]=this[_0x44d633(0xc0)];return;}catch(_0x1b0158){this[_0x44d633(0xb1)](_0x44d633(0x87)+(_0x23b594[_0x44d633(0x93)]?.[_0x44d633(0xc7)]||_0x44d633(0xd5)),_0x1b0158[_0x44d633(0xa9)]);}}}async[a4_0x3eae61(0xb6)](){const _0x2a94f4=a4_0x3eae61;this[_0x2a94f4(0x7a)]=ethers[_0x2a94f4(0xaa)](Setup[_0x2a94f4(0xa2)],_0x2a94f4(0xb8)),this['contracts']={'WETH':validateAddress(getContract(_0x2a94f4(0xc1))),'ETH':validateAddress(getContract(_0x2a94f4(0xc1))),'TAIKO':validateAddress(getContract(_0x2a94f4(0xb2))),'USDC':validateAddress(getContract(_0x2a94f4(0xc4))),'USDT':validateAddress(getContract(_0x2a94f4(0xdc))),'IZUMI_SWAP':validateAddress(getContract('izumi-swap')),'HENJIN_SWAP':validateAddress(getContract('henjin-swap')),'KODO_SWAP':validateAddress(getContract(_0x2a94f4(0xd0))),'SYMETRIC_SWAP':validateAddress(getContract(_0x2a94f4(0xa1)))},this[_0x2a94f4(0x9b)]={'WETH':WETHABI,'ERC20':ERC20_ABI,'ROUTER':IZUMIABI,'HENJIN':HENJIN_ABI,'KODO':KODO_ABI,'SYMETRIC':SYMETRIC_ABI},this[_0x2a94f4(0x86)]=this['swapCount']=this['runCount']=0x0,this['walletInstance']=null,this[_0x2a94f4(0x97)]=[],this[_0x2a94f4(0xd8)]=this[_0x2a94f4(0x7e)]=null,this[_0x2a94f4(0x7b)]=null,this[_0x2a94f4(0x8e)]=-0x1,this[_0x2a94f4(0xce)]=this[_0x2a94f4(0xca)]=0x0,this[_0x2a94f4(0x99)]=new Map();}async[a4_0x3eae61(0x94)](){const _0x25f641=a4_0x3eae61;try{const _0x2ea8e2=Helper[_0x25f641(0xb3)](this[_0x25f641(0xc8)]);this['walletInstance']=_0x2ea8e2===_0x25f641(0xbf)?new ethers[(_0x25f641(0x8f))](this[_0x25f641(0xc8)],this[_0x25f641(0xc0)]):ethers['Wallet']['fromPhrase'](this[_0x25f641(0xc8)])[_0x25f641(0xa0)](this['provider']),this['address']=validateAddress(this[_0x25f641(0x88)][_0x25f641(0x7b)]),this['lastNonce']=await this[_0x25f641(0xc0)][_0x25f641(0xbb)](this[_0x25f641(0x7b)]),this[_0x25f641(0x82)](),await Helper['delay'](0x7d0,this[_0x25f641(0xc8)],this,'','Please\x20wait\x20while\x20we\x20set\x20up\x20your\x20wallet.'),this['balanceManager']=new a4_0x5f2835(this),this[_0x25f641(0xc3)]=new a4_0x357a93(this),this[_0x25f641(0xbd)]=new a4_0x229d8b(this),await this[_0x25f641(0xdb)](!![]);}catch(_0xe1db72){this[_0x25f641(0xb1)](_0x25f641(0x8b),''+_0xe1db72['message']);}}[a4_0x3eae61(0x82)](){const _0x5ce547=a4_0x3eae61;this[_0x5ce547(0x7f)]={'weth':new ethers[(_0x5ce547(0x95))](this[_0x5ce547(0x84)][_0x5ce547(0xcc)],this[_0x5ce547(0x9b)][_0x5ce547(0xcc)],this[_0x5ce547(0x88)]),'taiko':new ethers['Contract'](this[_0x5ce547(0x84)]['TAIKO'],this[_0x5ce547(0x9b)]['ERC20'],this[_0x5ce547(0x88)]),'usdc':new ethers[(_0x5ce547(0x95))](this[_0x5ce547(0x84)][_0x5ce547(0xb9)],this[_0x5ce547(0x9b)]['ERC20'],this['walletInstance']),'usdt':new ethers['Contract'](this[_0x5ce547(0x84)][_0x5ce547(0x92)],this[_0x5ce547(0x9b)][_0x5ce547(0x81)],this[_0x5ce547(0x88)]),'swapRouter':new ethers[(_0x5ce547(0x95))](this[_0x5ce547(0x84)]['IZUMI_SWAP'],this[_0x5ce547(0x9b)][_0x5ce547(0xd7)],this['walletInstance']),'henjinRouter':new ethers[(_0x5ce547(0x95))](this[_0x5ce547(0x84)][_0x5ce547(0x7d)],this['ABIs'][_0x5ce547(0x85)],this[_0x5ce547(0x88)]),'kodoRouter':new ethers[(_0x5ce547(0x95))](this['contracts'][_0x5ce547(0x9f)],this['ABIs'][_0x5ce547(0xc2)],this[_0x5ce547(0x88)]),'symetricRouter':new ethers[(_0x5ce547(0x95))](this[_0x5ce547(0x84)]['SYMETRIC_SWAP'],this['ABIs'][_0x5ce547(0x98)],this['walletInstance'])};}async['getBalances'](_0x30e687=![]){const _0x105ef2=a4_0x3eae61;return await this['balanceManager'][_0x105ef2(0xdb)](_0x30e687);}async[a4_0x3eae61(0x90)](){const _0x34676d=a4_0x3eae61;try{const _0x3b49f0=Number(ethers['formatEther'](await this[_0x34676d(0xc0)][_0x34676d(0xad)](this['address'])));if(_0x3b49f0<Number(Setup['MINIMUMBUY']))return this[_0x34676d(0xb1)](_0x34676d(0xa7),'Insufficient\x20balance\x20ETH\x20for\x20swap');const _0x5ee0f2={'henjin':[_0x34676d(0xc4),_0x34676d(0xb2)],'kodo':[_0x34676d(0xb2),'usdt',_0x34676d(0xc4)],'izumi':[_0x34676d(0xc4),_0x34676d(0xdc),_0x34676d(0xb2)],'symetric':[_0x34676d(0xc4),_0x34676d(0xb2)],'approval':['weth',_0x34676d(0xc4),_0x34676d(0xdc),'taiko']},_0x478a4a=async _0x4c25ba=>{const _0x242387=_0x34676d;for(const _0x7be4f2 of _0x4c25ba){const _0x375308=await Helper[_0x242387(0x89)](Setup['MINIMUMBUY'],Setup[_0x242387(0xb4)],0x8)['toString']();await this[_0x242387(0xc3)]['swapOnHenjin'](_0x375308,_0x242387(0x8c),_0x7be4f2);}},_0x613059=async _0x232d79=>{const _0x2b7fe8=_0x34676d;for(const _0x5ae602 of _0x232d79){const _0x2be155=await Helper['randomFloat'](Setup[_0x2b7fe8(0xcb)],Setup[_0x2b7fe8(0xb4)],0x8)[_0x2b7fe8(0x9c)]();await this[_0x2b7fe8(0xc3)][_0x2b7fe8(0x96)](_0x2be155,_0x2b7fe8(0x8c),_0x5ae602);}},_0x1bcb1c=async(_0x15b27a,_0x32520e=![])=>{const _0x307938=_0x34676d;for(const _0xb7b9ce of _0x15b27a){const _0x59e889=await Helper[_0x307938(0x89)](Setup['MINIMUMBUY'],Setup[_0x307938(0xb4)],0x8)[_0x307938(0x9c)]();_0x32520e?await this[_0x307938(0xc3)][_0x307938(0x9d)](_0xb7b9ce):(await this[_0x307938(0xc3)]['swapOnKodo'](_0x59e889,_0xb7b9ce,![]),await this['swapManager']['swapOnKodo'](_0x59e889,_0xb7b9ce,!![]));}},_0x27a04c=async _0x35533e=>{const _0x148ef8=_0x34676d;for(const _0x15ccbc of _0x35533e){const _0x19a13c=await Helper[_0x148ef8(0x89)](Setup[_0x148ef8(0xcb)],Setup[_0x148ef8(0xb4)],0x8)['toString'](),_0x1b37ee=await encodedPath(tokenPath[_0x148ef8(0xac)+_0x15ccbc][0x0],tokenPath[_0x148ef8(0xac)+_0x15ccbc][0x1]);await this[_0x148ef8(0xc3)][_0x148ef8(0xd3)](_0x1b37ee,_0x19a13c,_0x15ccbc,!![]),await this['swapManager']['swapOnIzumi'](_0x1b37ee,_0x19a13c,_0x15ccbc,![]);}};await _0x478a4a(_0x5ee0f2[_0x34676d(0x9a)]),await _0x613059(_0x5ee0f2['symetric']),await _0x1bcb1c(_0x5ee0f2[_0x34676d(0xc6)]),await _0x1bcb1c(_0x5ee0f2[_0x34676d(0xc6)],!![]),await _0x27a04c(_0x5ee0f2[_0x34676d(0xa4)]),await this[_0x34676d(0xc3)]['swapAllTokensToWeth']();for(const _0xc4b084 of _0x5ee0f2[_0x34676d(0xa5)]){await this[_0x34676d(0xbd)][_0x34676d(0xd9)](_0xc4b084,this['contracts'][_0x34676d(0x9f)]),await this['tokenManager'][_0x34676d(0xd9)](_0xc4b084,this[_0x34676d(0x84)][_0x34676d(0xcf)]);}this[_0x34676d(0x83)]++;}catch(_0x17e214){console[_0x34676d(0xa6)](_0x17e214),await this[_0x34676d(0xb1)]('Failed\x20performSwap',_0x17e214[_0x34676d(0xa9)]);}}async[a4_0x3eae61(0xb1)](_0x5505dd,_0x2a5cfe){const _0x14011c=a4_0x3eae61;a4_0x504001[_0x14011c(0x8a)](_0x5505dd,this[_0x14011c(0xc8)],this,_0x14011c(0xbc)+_0x2a5cfe),await this[_0x14011c(0xd2)](0xdac);}async['sleep'](_0x1de06b){return new Promise(_0x18f7a5=>setTimeout(_0x18f7a5,_0x1de06b));}}